# Fetching Data in React.js

Fetching data from an API is one of the most common tasks in a React application.
To fully understand what is happening in the code, it helps to have a basic understanding of **web requests** and **HTTP methods** (such as `GET`, `POST`, `PUT`, and `DELETE`). You can read more about them in the [MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Methods).

In this example, I focus on performing a **GET request** to retrieve data from a server.

I walk through a simple example where I fetch and display a list of products using the **Fetch API**, making a request to a public endpoint provided by
ðŸ‘‰ **[dummyjson](https://dummyjson.com/products)**


---

## The Mental Model

Before looking at code, it helps to understand the flow:

1. **Make a request** to the server
2. **Wait for the server's response**
3. **Validate and extract the data** from the response
4. **Store the data in React state**
5. **Render the UI** by reading from that state

Once the data is in state, React takes care of updating the UI for us.

---

## The Example

Below is a simple `ProductsList` component that fetches products and displays them.

```jsx
import { useEffect, useState } from "react";
import Product from "./Product";

type ProductSummary = {
  id: number;
  title: string;
};

function ProductsList() {
  const [products, setProducts] = useState<ProductSummary[]>([]);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    const handleFetchProducts = async () => {
      setLoading(true);

      await fetch("https://dummyjson.com/products")
        .then((res) => res.json())
        .then((data) => {
          setProducts(data.products);
          setLoading(false);
        });
    };

    handleFetchProducts();
  }, []);

  return (
    <div>
      <h1>Products</h1>

      {loading ? (
        <p>Loading...</p>
      ) : (
        products.map((product) => (
          <Product key={product.id} title={product.title} />
        ))
      )}
    </div>
  );
}

export default ProductsList;
```

---

## What is Happening Here?

### 1. State Management

```js
const [products, setProducts] = useState<ProductSummary[]>([]);
const [loading, setLoading] = useState(false);
```

* `products` stores the fetched data
* `loading` helps us show a loading indicator while the request is in progress

---

### 2. Fetching Data with `useEffect`

```js
useEffect(() => {
  const handleFetchProducts = async () => {
    setLoading(true);
    ...
  };

  handleFetchProducts();
}, []);
```

* `useEffect` runs **once** when the component mounts
* This is the right place to perform side effects like data fetching
* The empty dependency array (`[]`) ensures the fetch only runs once

---

### 3. Making the HTTP Request

```js
fetch("https://dummyjson.com/products")
  .then((res) => res.json())
  .then((data) => {
    setProducts(data.products);
    setLoading(false);
  });
```

* `fetch` sends a GET request to the API
* We convert the response to JSON
* We store the products in state
* We turn off the loading state once the data arrives

---

### 4. Rendering the UI

```jsx
{loading ? (
  <p>Loading...</p>
) : (
  products.map((product) => (
    <Product key={product.id} title={product.title} />
  ))
)}
```

* While loading, we show a simple message
* Once data is available, we map over the products and render a `Product` component for each item

---

## Key Takeaways

* **Data fetching happens in `useEffect`**
* **API responses are stored in state**
* **UI is derived from state**
* React automatically re-renders when state changes


This patternâ€”**fetch â†’ store in state â†’ render from state**â€”is the foundation of data fetching in React.

